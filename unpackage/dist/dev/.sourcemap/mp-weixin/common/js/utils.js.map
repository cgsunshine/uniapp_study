{"version":3,"file":"utils.js","sources":["common/js/utils.js"],"sourcesContent":["class Utils {\r\n\tconstructor() {\r\n\t\tthis.baseUrl = 'http://159.75.169.224:7300/pz'\r\n\t}\r\n\t//获取用户信息\r\n\tgetUserInfo() {\r\n\t\t//调用登录的api\r\n\t\tuni.login({\r\n\t\t\tsuccess: res => {\r\n\t\t\t\tconsole.log(res)\r\n\t\t\t\tthis.request({\r\n\t\t\t\t\turl: '/auth/wxLogin',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tcode: res.code\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\tconsole.log(res, 'res')\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\t//http://159.75.169.224:7300/pz/auth/wxLogin\r\n\trequest(option = {\r\n\t\tshowLoading: false\r\n\t}) {\r\n\t\tif (!option.url) {\r\n\t\t\treturn false\r\n\t\t}\r\n\t\tif (option.showLoading) {\r\n\t\t\tthis.showLoading()\r\n\t\t}\r\n\t\tuni.request({\r\n\t\t\turl: this.baseUrl + option.url,\r\n\t\t\tdata: option.data ? option.data : {},\r\n\t\t\theader: option.header ? option.header : {},\r\n\t\t\tmethod: option.method ? option.method : 'GET',\r\n\t\t\tsuccess: (res) => {\r\n\t\t\t\tuni.hideLoading()\r\n\t\t\t\tif (res.data.code != 10000) {\r\n\t\t\t\t\tif (option.fail && typeof option.fail == 'function') {\r\n\t\t\t\t\t\toption.fail(res)\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (option.success && typeof option.success == 'function') {\r\n\t\t\t\t\t\toption.success(res.data)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tfail: res => {\r\n\t\t\t\tconsole.log(res)\r\n\t\t\t\tuni.hideLoading()\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\t//创建加载logding效果\r\n\tshowLoding() {\r\n\t\tconst isShowLoading = uni.getStorageSync('isShowLoading')\r\n\t\tif (isShowLoading) {\r\n\t\t\tuni.hideLoading()\r\n\t\t\tuni.setStorageSync('isShowLoading', false)\r\n\t\t}\r\n\t\tuni.showLoading({\r\n\t\t\ttitle: '加载中...',\r\n\t\t\tcomplete: function() {\r\n\t\t\t\tuni.setStorageSync('isShowLoading', true)\r\n\t\t\t},\r\n\t\t\tfail: function() {\r\n\t\t\t\tuni.setStorageSync('isShowLoading', false)\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n}\r\n\r\nexport default new Utils()"],"names":["uni","res"],"mappings":";;AAAA,MAAM,MAAM;AAAA,EACX,cAAc;AACb,SAAK,UAAU;AAAA,EACf;AAAA;AAAA,EAED,cAAc;AAEbA,kBAAAA,MAAI,MAAM;AAAA,MACT,SAAS,SAAO;AACfA,sBAAAA,MAAA,MAAA,OAAA,4BAAY,GAAG;AACf,aAAK,QAAQ;AAAA,UACZ,KAAK;AAAA,UACL,MAAM;AAAA,YACL,MAAM,IAAI;AAAA,UACV;AAAA,UACD,SAAS,CAAAC,SAAO;AACfD,0BAAAA,+CAAYC,MAAK,KAAK;AAAA,UACtB;AAAA,QACN,CAAK;AAAA,MACD;AAAA,IACJ,CAAG;AAAA,EACD;AAAA;AAAA,EAED,QAAQ,SAAS;AAAA,IAChB,aAAa;AAAA,EACf,GAAI;AACF,QAAI,CAAC,OAAO,KAAK;AAChB,aAAO;AAAA,IACP;AACD,QAAI,OAAO,aAAa;AACvB,WAAK,YAAa;AAAA,IAClB;AACDD,kBAAAA,MAAI,QAAQ;AAAA,MACX,KAAK,KAAK,UAAU,OAAO;AAAA,MAC3B,MAAM,OAAO,OAAO,OAAO,OAAO,CAAE;AAAA,MACpC,QAAQ,OAAO,SAAS,OAAO,SAAS,CAAE;AAAA,MAC1C,QAAQ,OAAO,SAAS,OAAO,SAAS;AAAA,MACxC,SAAS,CAAC,QAAQ;AACjBA,sBAAAA,MAAI,YAAa;AACjB,YAAI,IAAI,KAAK,QAAQ,KAAO;AAC3B,cAAI,OAAO,QAAQ,OAAO,OAAO,QAAQ,YAAY;AACpD,mBAAO,KAAK,GAAG;AAAA,UACf;AAAA,QACN,OAAW;AACN,cAAI,OAAO,WAAW,OAAO,OAAO,WAAW,YAAY;AAC1D,mBAAO,QAAQ,IAAI,IAAI;AAAA,UACvB;AAAA,QACD;AAAA,MACD;AAAA,MACD,MAAM,SAAO;AACZA,sBAAAA,MAAA,MAAA,OAAA,4BAAY,GAAG;AACfA,sBAAAA,MAAI,YAAa;AAAA,MACjB;AAAA,IACJ,CAAG;AAAA,EACD;AAAA;AAAA,EAED,aAAa;AACZ,UAAM,gBAAgBA,cAAAA,MAAI,eAAe,eAAe;AACxD,QAAI,eAAe;AAClBA,oBAAAA,MAAI,YAAa;AACjBA,0BAAI,eAAe,iBAAiB,KAAK;AAAA,IACzC;AACDA,kBAAAA,MAAI,YAAY;AAAA,MACf,OAAO;AAAA,MACP,UAAU,WAAW;AACpBA,4BAAI,eAAe,iBAAiB,IAAI;AAAA,MACxC;AAAA,MACD,MAAM,WAAW;AAChBA,4BAAI,eAAe,iBAAiB,KAAK;AAAA,MACzC;AAAA,IACJ,CAAG;AAAA,EACD;AACF;AAEA,MAAA,UAAe,IAAI,MAAK;;"}