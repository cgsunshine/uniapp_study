{"version":3,"file":"index.js","sources":["pages/order/index.vue","../../../soft/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvb3JkZXIvaW5kZXgudnVl"],"sourcesContent":["<template>\r\n\t<view>\r\n\t\t<view style=\"width: 100%; border-bottom: 0 none; position: fixed; z-index: 2\">\r\n\t\t\t<view style=\"background: #ffffff; position: relative\">\r\n\t\t\t\t<view class=\"h-tab vp-flex\">\r\n\t\t\t\t\t<view :class=\"'h-tab-item vp-flex_1 ' + (filt == '' ? 'on' : '')\" data-filt=\"\"\r\n\t\t\t\t\t\t@tap=\"onFilterChange\">全部</view>\r\n\t\t\t\t\t<view :class=\"'h-tab-item vp-flex_1 ' + (filt == 1 ? 'on' : '')\" data-filt=\"1\"\r\n\t\t\t\t\t\t@tap=\"onFilterChange\">待支付</view>\r\n\t\t\t\t\t<view :class=\"'h-tab-item vp-flex_1 ' + (filt == 2 ? 'on' : '')\" data-filt=\"2\"\r\n\t\t\t\t\t\t@tap=\"onFilterChange\">待服务</view>\r\n\t\t\t\t\t<view :class=\"'h-tab-item vp-flex_1 ' + (filt == 3 ? 'on' : '')\" data-filt=\"3\"\r\n\t\t\t\t\t\t@tap=\"onFilterChange\">已完成</view>\r\n\t\t\t\t\t<view :class=\"'h-tab-item vp-flex_1 ' + (filt == 4 ? 'on' : '')\" data-filt=\"4\"\r\n\t\t\t\t\t\t@tap=\"onFilterChange\">已取消</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<view style=\"height: 100rpx\"></view>\r\n\t\t<block v-if=\"list != null\">\r\n\t\t\t<view v-if=\"list != null && list.length == 0\" style=\"padding: 40rpx 40rpx 40rpx 40rpx; text-align: center\">\r\n\t\t\t\t<image src=\"/static/resource/images/empty.png\" mode=\"widthFix\" style=\"width: 200rpx\" />\r\n\t\t\t\t<view class=\"f5\">没有相关内容~</view>\r\n\t\t\t</view>\r\n\t\t\t<view v-else class=\"od-list\">\r\n\t\t\t\t<block v-for=\"(item, index) in list\" :key=\"index\">\r\n\t\t\t\t\t<view class=\"od-item\" @tap=\"toOrder\" :data-id=\"item.out_trade_no\">\r\n\t\t\t\t\t\t<view class=\"weui-cell weui-cell_access\">\r\n\t\t\t\t\t\t\t<view class=\"weui-cell__hd\">\r\n\t\t\t\t\t\t\t\t<view>\r\n\t\t\t\t\t\t\t\t\t<image :src=\"item.service_logo_image_url\" mode=\"widthFix\" class=\"od-logo\"\r\n\t\t\t\t\t\t\t\t\t\tstyle=\"width: 100rpx; height: 100rpx; margin-right: 20rpx\" />\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"weui-cell__bd\">\r\n\t\t\t\t\t\t\t\t<view>\r\n\t\t\t\t\t\t\t\t\t<text style=\"font-weight: bold\">{{ item.service_name }}</text>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view class=\"od-info\">\r\n\t\t\t\t\t\t\t\t\t<block v-if=\"item.service_stype <= 20\">\r\n\t\t\t\t\t\t\t\t\t\t<view>\r\n\t\t\t\t\t\t\t\t\t\t\t<text>{{ item.hospital_name }}（{{ item.area_name }}）</text>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t<view>\r\n\t\t\t\t\t\t\t\t\t\t\t预约时间：\r\n\t\t\t\t\t\t\t\t\t\t\t<formater :timestamp=\"item.starttime\" format=\"MM-dd hh:mm\"></formater>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t<view>\r\n\t\t\t\t\t\t\t\t\t\t\t就诊人员：\r\n\t\t\t\t\t\t\t\t\t\t\t<text>{{ item.client_name }}</text>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t</block>\r\n\t\t\t\t\t\t\t\t\t<block v-if=\"item.service_stype > 20 && item.service_stype < 100\">\r\n\t\t\t\t\t\t\t\t\t\t<view>\r\n\t\t\t\t\t\t\t\t\t\t\t<text>{{ item.hospital_name }}（{{ item.area_name }}）</text>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t<view>\r\n\t\t\t\t\t\t\t\t\t\t\t处理时间：\r\n\t\t\t\t\t\t\t\t\t\t\t<formater :timestamp=\"item.starttime\" format=\"MM-dd hh:mm\"></formater>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t</block>\r\n\t\t\t\t\t\t\t\t\t<block v-if=\"item.service_stype > 100\">\r\n\t\t\t\t\t\t\t\t\t\t<view>\r\n\t\t\t\t\t\t\t\t\t\t\t服务时间：\r\n\t\t\t\t\t\t\t\t\t\t\t<formater :timestamp=\"item.starttime\" format=\"MM-dd hh:mm\"></formater>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t<view>\r\n\t\t\t\t\t\t\t\t\t\t\t服务对象：\r\n\t\t\t\t\t\t\t\t\t\t\t<text>{{ item.client_name }}</text>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t<!-- <view>服务地址：<text>{{item.address.address}}</text> </view> -->\r\n\t\t\t\t\t\t\t\t\t</block>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"weui-cell__ft\">\r\n\t\t\t\t\t\t\t\t<!-- 待付款 -->\r\n\t\t\t\t\t\t\t\t<block v-if=\"item.trade_state == '待支付'\">\r\n\t\t\t\t\t\t\t\t\t<view style=\"color: #ffa200\"><text>待支付</text></view>\r\n\t\t\t\t\t\t\t\t\t<view style=\"color: #ffa200\">\r\n\t\t\t\t\t\t\t\t\t\t<counter style=\"font-size: 24rpx\" :second=\"item._exp_time\"\r\n\t\t\t\t\t\t\t\t\t\t\t@counterOver=\"onCounterOver\" />\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t</block>\r\n\t\t\t\t\t\t\t\t<!-- 进行中 -->\r\n\t\t\t\t\t\t\t\t<block v-if=\"item.trade_state == '待服务'\">\r\n\t\t\t\t\t\t\t\t\t<view style=\"color: #1da6fd\"><text>待服务</text></view>\r\n\t\t\t\t\t\t\t\t</block>\r\n\t\t\t\t\t\t\t\t<!-- 已完成 -->\r\n\t\t\t\t\t\t\t\t<block v-if=\"item.trade_state == '已完成'\">\r\n\t\t\t\t\t\t\t\t\t<view style=\"color: #21c521\"><text>已完成</text></view>\r\n\t\t\t\t\t\t\t\t</block>\r\n\t\t\t\t\t\t\t\t<!-- 已取消 -->\r\n\t\t\t\t\t\t\t\t<block v-if=\"item.trade_state == '已取消'\">\r\n\t\t\t\t\t\t\t\t\t<view style=\"color: #999999\"><text>已取消</text></view>\r\n\t\t\t\t\t\t\t\t</block>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</block>\r\n\t\t\t</view>\r\n\t\t</block>\r\n\t</view>\r\n</template>\r\n\r\n<script setup>\r\n\timport {\r\n\t\tcomputed,\r\n\t\treactive,\r\n\t\tref,\r\n\t\ttoRaw\r\n\t} from 'vue';\r\n\timport {\r\n\t\tonShow\r\n\t} from '@dcloudio/uni-app';\r\n\tconst app = getApp()\r\n\t//记录当前的tab\r\n\tconst filt = ref('')\r\n\t//订单列表数据\r\n\tconst list = ref(null);\r\n\r\n\tonShow(() => {\r\n\t\tconsole.log(app.globalData.orders_filt,\"app.globalData.orders_filt\")\r\n\t\tfilt.value = app.globalData.orders_filt\r\n\t\t//调用订单列表\r\n\t\tloadList()\r\n\t})\r\n\t//订单状态筛选\r\n\tconst onFilterChange = (e) => {\r\n\t\tconst {\r\n\t\t\tfilt: curFilt\r\n\t\t} = e.currentTarget.dataset\r\n\t\tif (curFilt === filt.value) return\r\n\t\tfilt.value = curFilt\r\n\t\tloadList()\r\n\t}\r\n\r\n\t//订单列表加载\r\n\tconst loadList = () => {\r\n\t\t//调用订单列表\r\n\t\tapp.globalData.utils.request({\r\n\t\t\turl: '/order/list',\r\n\t\t\tmethod: 'GET',\r\n\t\t\tdata: {\r\n\t\t\t\tstate: filt.value\r\n\t\t\t},\r\n\t\t\theader: {\r\n\t\t\t\ttoken: uni.getStorageSync('token')\r\n\t\t\t},\r\n\t\t\tsuccess: res => {\r\n\t\t\t\tconsole.log(res, 'success')\r\n\t\t\t\tlist.value = res.data\r\n\t\t\t},\r\n\t\t\tfail: res => {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: res.msg,\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\t//跳转订单页面\r\n\tconst toOrder = (e) => {\r\n\t\tuni.navigateTo({\r\n\t\t\turl: '../order/order?oid=' + e.currentTarget.dataset.id\r\n\t\t})\r\n\t}\r\n\t//倒计时结束后的回调\r\n\tconst onCounterOver = () => {\r\n\t\tloadList()\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t@import './index.css'\r\n</style>","import MiniProgramPage from 'D:/pro/unipro/uniapp_study/pages/order/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","onShow","uni","MiniProgramPage"],"mappings":";;;;;;;;;;;;;;;;AAkHC,UAAM,MAAM,OAAQ;AAEpB,UAAM,OAAOA,cAAG,IAAC,EAAE;AAEnB,UAAM,OAAOA,kBAAI,IAAI;AAErBC,kBAAAA,OAAO,MAAM;AACZC,oBAAY,MAAA,MAAA,OAAA,gCAAA,IAAI,WAAW,aAAY,4BAA4B;AACnE,WAAK,QAAQ,IAAI,WAAW;AAE5B,eAAU;AAAA,IACZ,CAAE;AAED,UAAM,iBAAiB,CAAC,MAAM;AAC7B,YAAM;AAAA,QACL,MAAM;AAAA,MACT,IAAM,EAAE,cAAc;AACpB,UAAI,YAAY,KAAK;AAAO;AAC5B,WAAK,QAAQ;AACb,eAAU;AAAA,IACV;AAGD,UAAM,WAAW,MAAM;AAEtB,UAAI,WAAW,MAAM,QAAQ;AAAA,QAC5B,KAAK;AAAA,QACL,QAAQ;AAAA,QACR,MAAM;AAAA,UACL,OAAO,KAAK;AAAA,QACZ;AAAA,QACD,QAAQ;AAAA,UACP,OAAOA,cAAAA,MAAI,eAAe,OAAO;AAAA,QACjC;AAAA,QACD,SAAS,SAAO;AACfA,wBAAAA,mDAAY,KAAK,SAAS;AAC1B,eAAK,QAAQ,IAAI;AAAA,QACjB;AAAA,QACD,MAAM,SAAO;AACZA,wBAAAA,MAAI,UAAU;AAAA,YACb,OAAO,IAAI;AAAA,YACX,MAAM;AAAA,UACX,CAAK;AAAA,QACD;AAAA,MACJ,CAAG;AAAA,IACD;AAED,UAAM,UAAU,CAAC,MAAM;AACtBA,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK,wBAAwB,EAAE,cAAc,QAAQ;AAAA,MACxD,CAAG;AAAA,IACD;AAED,UAAM,gBAAgB,MAAM;AAC3B,eAAU;AAAA,IACV;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACxKF,GAAG,WAAWC,SAAe;"}