{"version":3,"file":"counter.js","sources":["components/counter/counter.vue","../../../soft/HBuilderX/plugins/uniapp-cli-vite/uniComponent:/RDovcHJvL3VuaXByby91bmlhcHBfc3R1ZHkvY29tcG9uZW50cy9jb3VudGVyL2NvdW50ZXIudnVl"],"sourcesContent":["<template>\n\t{{ formater }}\n</template>\n\n<script setup>\r\n\timport {\r\n\t\tref,\r\n\t\tonMounted,\r\n\t\tdefineProps,\r\n\t\tdefineEmits,\r\n\t\twatch\r\n\t} from 'vue'\r\n\tconst props = defineProps({\r\n\t\tsecond: {\r\n\t\t\ttype: Number,\r\n\t\t\tdefault: 0\r\n\t\t},\r\n\t\tformat: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: 'MM-dd hh:mm'\r\n\t\t},\r\n\t\tsformat: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: 'hh:mm:ss'\r\n\t\t},\r\n\t\tsuffix: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: ''\r\n\t\t}\r\n\t})\r\n\tconst emit = defineEmits(['counterOver'])\r\n\t// 倒计时显示\r\n\tconst formater = ref('')\r\n\t\r\n\tonMounted(() => {\r\n\t\tformater.value = TIME_FORMAT(props.second)\r\n\t})\r\n\t// 倒计时逻辑处理\r\n\tconst TIME_FORMAT = (ts) => {\r\n\t\tlet res\r\n\t\tconst showtime = () => {\r\n\t\t\tif (ts <= 0) {\r\n\t\t\t\tclearInterval(run)\r\n\t\t\t\temit('counterOver')\r\n\t\t\t\treturn TIME_SFORMAT(0, props.sformat, props.suffix)\r\n\t\t\t}\r\n\t\t\tres = TIME_SFORMAT(ts, props.sformat, props.suffix)\r\n\t\t\treturn res\r\n\t\t}\r\n\t\tconst run = setInterval(() => {\r\n\t\t\tts -= 1000\r\n\t\t\tres = showtime()\r\n\t\t\tformater.value = res\r\n\t\t}, 1000)\r\n\t}\r\n\tconst TIME_FORMIN = (param) => {\r\n\t\tif (param < 0) {\r\n\t\t\tparam = 0\r\n\t\t}\r\n\t\tif (param < 10) {\r\n\t\t\tparam = '0' + param\r\n\t\t}\r\n\t\treturn param\r\n\t}\r\n\t\r\n\tconst TIME_SFORMAT = (ts, sfmt, suffix) => {\r\n\t\tconst time = {\r\n\t\t\t'h+': TIME_FORMIN(Math.floor((ts / 1000 / 60 / 60) % 24)),\r\n\t\t\t'm+': TIME_FORMIN(Math.floor((ts / 1000 / 60) % 60)),\r\n\t\t\t's+': TIME_FORMIN(Math.floor((ts / 1000) % 60))\r\n\t\t}\r\n\t\tfor (let k in time) {\r\n\t\t\tif (new RegExp('(' + k + ')').test(sfmt)) {\r\n\t\t\t\tsfmt = sfmt.replace(RegExp.$1, RegExp.$1.length == 1 ? time[k] : ('00' + time[k]).substr(('' + time[k]).length))\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn sfmt + suffix\r\n\t}\n</script>\n\n<style>\n\n</style>","import Component from 'D:/pro/unipro/uniapp_study/components/counter/counter.vue'\nwx.createComponent(Component)"],"names":["ref","onMounted","Component"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAYC,UAAM,QAAQ;AAkBd,UAAM,OAAO;AAEb,UAAM,WAAWA,cAAG,IAAC,EAAE;AAEvBC,kBAAAA,UAAU,MAAM;AACf,eAAS,QAAQ,YAAY,MAAM,MAAM;AAAA,IAC3C,CAAE;AAED,UAAM,cAAc,CAAC,OAAO;AAC3B,UAAI;AACJ,YAAM,WAAW,MAAM;AACtB,YAAI,MAAM,GAAG;AACZ,wBAAc,GAAG;AACjB,eAAK,aAAa;AAClB,iBAAO,aAAa,GAAG,MAAM,SAAS,MAAM,MAAM;AAAA,QAClD;AACD,cAAM,aAAa,IAAI,MAAM,SAAS,MAAM,MAAM;AAClD,eAAO;AAAA,MACP;AACD,YAAM,MAAM,YAAY,MAAM;AAC7B,cAAM;AACN,cAAM,SAAU;AAChB,iBAAS,QAAQ;AAAA,MACjB,GAAE,GAAI;AAAA,IACP;AACD,UAAM,cAAc,CAAC,UAAU;AAC9B,UAAI,QAAQ,GAAG;AACd,gBAAQ;AAAA,MACR;AACD,UAAI,QAAQ,IAAI;AACf,gBAAQ,MAAM;AAAA,MACd;AACD,aAAO;AAAA,IACP;AAED,UAAM,eAAe,CAAC,IAAI,MAAM,WAAW;AAC1C,YAAM,OAAO;AAAA,QACZ,MAAM,YAAY,KAAK,MAAO,KAAK,MAAO,KAAK,KAAM,EAAE,CAAC;AAAA,QACxD,MAAM,YAAY,KAAK,MAAO,KAAK,MAAO,KAAM,EAAE,CAAC;AAAA,QACnD,MAAM,YAAY,KAAK,MAAO,KAAK,MAAQ,EAAE,CAAC;AAAA,MAC9C;AACD,eAAS,KAAK,MAAM;AACnB,YAAI,IAAI,OAAO,MAAM,IAAI,GAAG,EAAE,KAAK,IAAI,GAAG;AACzC,iBAAO,KAAK,QAAQ,OAAO,IAAI,OAAO,GAAG,UAAU,IAAI,KAAK,CAAC,KAAK,OAAO,KAAK,CAAC,GAAG,QAAQ,KAAK,KAAK,CAAC,GAAG,MAAM,CAAC;AAAA,QAC/G;AAAA,MACD;AACD,aAAO,OAAO;AAAA,IACd;;;;;;;;AC5EF,GAAG,gBAAgBC,SAAS;"}