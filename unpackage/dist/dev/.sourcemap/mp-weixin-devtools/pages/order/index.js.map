{"version":3,"names":["app","getApp","filt","common_vendor","ref","list","onShow","index","__f__","globalData","orders_filt","value","loadList","onFilterChange","e","curFilt","currentTarget","dataset","utils","request","url","method","data","state","header","token","getStorageSync","success","res","fail","showToast","title","msg","icon","toOrder","navigateTo","id","onCounterOver","wx","createPage","_sfc_main"],"sources":["index.vue","cGFnZXMvb3JkZXIvaW5kZXgudnVl"],"sourcesContent":["<template>\r\n\t<view>\r\n\t\t<view style=\"width: 100%; border-bottom: 0 none; position: fixed; z-index: 2\">\r\n\t\t\t<view style=\"background: #ffffff; position: relative\">\r\n\t\t\t\t<view class=\"h-tab vp-flex\">\r\n\t\t\t\t\t<view :class=\"'h-tab-item vp-flex_1 ' + (filt == '' ? 'on' : '')\" data-filt=\"\"\r\n\t\t\t\t\t\t@tap=\"onFilterChange\">全部</view>\r\n\t\t\t\t\t<view :class=\"'h-tab-item vp-flex_1 ' + (filt == 1 ? 'on' : '')\" data-filt=\"1\"\r\n\t\t\t\t\t\t@tap=\"onFilterChange\">待支付</view>\r\n\t\t\t\t\t<view :class=\"'h-tab-item vp-flex_1 ' + (filt == 2 ? 'on' : '')\" data-filt=\"2\"\r\n\t\t\t\t\t\t@tap=\"onFilterChange\">待服务</view>\r\n\t\t\t\t\t<view :class=\"'h-tab-item vp-flex_1 ' + (filt == 3 ? 'on' : '')\" data-filt=\"3\"\r\n\t\t\t\t\t\t@tap=\"onFilterChange\">已完成</view>\r\n\t\t\t\t\t<view :class=\"'h-tab-item vp-flex_1 ' + (filt == 4 ? 'on' : '')\" data-filt=\"4\"\r\n\t\t\t\t\t\t@tap=\"onFilterChange\">已取消</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<view style=\"height: 100rpx\"></view>\r\n\t\t<block v-if=\"list != null\">\r\n\t\t\t<view v-if=\"list != null && list.length == 0\" style=\"padding: 40rpx 40rpx 40rpx 40rpx; text-align: center\">\r\n\t\t\t\t<image src=\"/static/resource/images/empty.png\" mode=\"widthFix\" style=\"width: 200rpx\" />\r\n\t\t\t\t<view class=\"f5\">没有相关内容~</view>\r\n\t\t\t</view>\r\n\t\t\t<view v-else class=\"od-list\">\r\n\t\t\t\t<block v-for=\"(item, index) in list\" :key=\"index\">\r\n\t\t\t\t\t<view class=\"od-item\" @tap=\"toOrder\" :data-id=\"item.out_trade_no\">\r\n\t\t\t\t\t\t<view class=\"weui-cell weui-cell_access\">\r\n\t\t\t\t\t\t\t<view class=\"weui-cell__hd\">\r\n\t\t\t\t\t\t\t\t<view>\r\n\t\t\t\t\t\t\t\t\t<image :src=\"item.service_logo_image_url\" mode=\"widthFix\" class=\"od-logo\"\r\n\t\t\t\t\t\t\t\t\t\tstyle=\"width: 100rpx; height: 100rpx; margin-right: 20rpx\" />\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"weui-cell__bd\">\r\n\t\t\t\t\t\t\t\t<view>\r\n\t\t\t\t\t\t\t\t\t<text style=\"font-weight: bold\">{{ item.service_name }}</text>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view class=\"od-info\">\r\n\t\t\t\t\t\t\t\t\t<block v-if=\"item.service_stype <= 20\">\r\n\t\t\t\t\t\t\t\t\t\t<view>\r\n\t\t\t\t\t\t\t\t\t\t\t<text>{{ item.hospital_name }}（{{ item.area_name }}）</text>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t<view>\r\n\t\t\t\t\t\t\t\t\t\t\t预约时间：\r\n\t\t\t\t\t\t\t\t\t\t\t<formater :timestamp=\"item.starttime\" format=\"MM-dd hh:mm\"></formater>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t<view>\r\n\t\t\t\t\t\t\t\t\t\t\t就诊人员：\r\n\t\t\t\t\t\t\t\t\t\t\t<text>{{ item.client_name }}</text>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t</block>\r\n\t\t\t\t\t\t\t\t\t<block v-if=\"item.service_stype > 20 && item.service_stype < 100\">\r\n\t\t\t\t\t\t\t\t\t\t<view>\r\n\t\t\t\t\t\t\t\t\t\t\t<text>{{ item.hospital_name }}（{{ item.area_name }}）</text>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t<view>\r\n\t\t\t\t\t\t\t\t\t\t\t处理时间：\r\n\t\t\t\t\t\t\t\t\t\t\t<formater :timestamp=\"item.starttime\" format=\"MM-dd hh:mm\"></formater>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t</block>\r\n\t\t\t\t\t\t\t\t\t<block v-if=\"item.service_stype > 100\">\r\n\t\t\t\t\t\t\t\t\t\t<view>\r\n\t\t\t\t\t\t\t\t\t\t\t服务时间：\r\n\t\t\t\t\t\t\t\t\t\t\t<formater :timestamp=\"item.starttime\" format=\"MM-dd hh:mm\"></formater>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t<view>\r\n\t\t\t\t\t\t\t\t\t\t\t服务对象：\r\n\t\t\t\t\t\t\t\t\t\t\t<text>{{ item.client_name }}</text>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t<!-- <view>服务地址：<text>{{item.address.address}}</text> </view> -->\r\n\t\t\t\t\t\t\t\t\t</block>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"weui-cell__ft\">\r\n\t\t\t\t\t\t\t\t<!-- 待付款 -->\r\n\t\t\t\t\t\t\t\t<block v-if=\"item.trade_state == '待支付'\">\r\n\t\t\t\t\t\t\t\t\t<view style=\"color: #ffa200\"><text>待支付</text></view>\r\n\t\t\t\t\t\t\t\t\t<view style=\"color: #ffa200\">\r\n\t\t\t\t\t\t\t\t\t\t<counter style=\"font-size: 24rpx\" :second=\"item._exp_time\"\r\n\t\t\t\t\t\t\t\t\t\t\t@counterOver=\"onCounterOver\" />\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t</block>\r\n\t\t\t\t\t\t\t\t<!-- 进行中 -->\r\n\t\t\t\t\t\t\t\t<block v-if=\"item.trade_state == '待服务'\">\r\n\t\t\t\t\t\t\t\t\t<view style=\"color: #1da6fd\"><text>待服务</text></view>\r\n\t\t\t\t\t\t\t\t</block>\r\n\t\t\t\t\t\t\t\t<!-- 已完成 -->\r\n\t\t\t\t\t\t\t\t<block v-if=\"item.trade_state == '已完成'\">\r\n\t\t\t\t\t\t\t\t\t<view style=\"color: #21c521\"><text>已完成</text></view>\r\n\t\t\t\t\t\t\t\t</block>\r\n\t\t\t\t\t\t\t\t<!-- 已取消 -->\r\n\t\t\t\t\t\t\t\t<block v-if=\"item.trade_state == '已取消'\">\r\n\t\t\t\t\t\t\t\t\t<view style=\"color: #999999\"><text>已取消</text></view>\r\n\t\t\t\t\t\t\t\t</block>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</block>\r\n\t\t\t</view>\r\n\t\t</block>\r\n\t</view>\r\n</template>\r\n\r\n<script setup>\r\n\timport {\r\n\t\tcomputed,\r\n\t\treactive,\r\n\t\tref,\r\n\t\ttoRaw\r\n\t} from 'vue';\r\n\timport {\r\n\t\tonShow\r\n\t} from '@dcloudio/uni-app';\r\n\tconst app = getApp()\r\n\t//记录当前的tab\r\n\tconst filt = ref('')\r\n\t//订单列表数据\r\n\tconst list = ref(null);\r\n\r\n\tonShow(() => {\r\n\t\tconsole.log(app.globalData.orders_filt,\"app.globalData.orders_filt\")\r\n\t\tfilt.value = app.globalData.orders_filt\r\n\t\t//调用订单列表\r\n\t\tloadList()\r\n\t})\r\n\t//订单状态筛选\r\n\tconst onFilterChange = (e) => {\r\n\t\tconst {\r\n\t\t\tfilt: curFilt\r\n\t\t} = e.currentTarget.dataset\r\n\t\tif (curFilt === filt.value) return\r\n\t\tfilt.value = curFilt\r\n\t\tloadList()\r\n\t}\r\n\r\n\t//订单列表加载\r\n\tconst loadList = () => {\r\n\t\t//调用订单列表\r\n\t\tapp.globalData.utils.request({\r\n\t\t\turl: '/order/list',\r\n\t\t\tmethod: 'GET',\r\n\t\t\tdata: {\r\n\t\t\t\tstate: filt.value\r\n\t\t\t},\r\n\t\t\theader: {\r\n\t\t\t\ttoken: uni.getStorageSync('token')\r\n\t\t\t},\r\n\t\t\tsuccess: res => {\r\n\t\t\t\tconsole.log(res, 'success')\r\n\t\t\t\tlist.value = res.data\r\n\t\t\t},\r\n\t\t\tfail: res => {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: res.msg,\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\t//跳转订单页面\r\n\tconst toOrder = (e) => {\r\n\t\tuni.navigateTo({\r\n\t\t\turl: '../order/order?oid=' + e.currentTarget.dataset.id\r\n\t\t})\r\n\t}\r\n\t//倒计时结束后的回调\r\n\tconst onCounterOver = () => {\r\n\t\tloadList()\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t@import './index.css'\r\n</style>","import MiniProgramPage from 'D:/pro/unipro/uniapp_study/pages/order/index.vue'\nwx.createPage(MiniProgramPage)"],"mappings":";;;;;;;;;;;;;;;;;;;;;;IAkHC,IAAMA,GAAA,GAAMC,MAAA,EAAQ;IAEpB,IAAMC,IAAA,GAAOC,aAAA,CAAGC,GAAA,CAAC,EAAE;IAEnB,IAAMC,IAAA,GAAOF,aAAA,CAAAC,GAAA,CAAI,IAAI;IAErBD,aAAA,CAAAG,MAAA,CAAO,YAAM;MACZH,aAAA,CAAYI,KAAA,CAAAC,KAAA,wCAAAR,GAAA,CAAIS,UAAA,CAAWC,WAAA,EAAY,4BAA4B;MACnER,IAAA,CAAKS,KAAA,GAAQX,GAAA,CAAIS,UAAA,CAAWC,WAAA;MAE5BE,QAAA,EAAU;IACZ,CAAE;IAED,IAAMC,cAAA,GAAiB,SAAjBA,eAAkBC,CAAA,EAAM;MAC7B,IACOC,OAAA,GACHD,CAAA,CAAEE,aAAA,CAAcC,OAAA,CADnBf,IAAA;MAED,IAAIa,OAAA,KAAYb,IAAA,CAAKS,KAAA,EAAO;MAC5BT,IAAA,CAAKS,KAAA,GAAQI,OAAA;MACbH,QAAA,EAAU;IACV;IAGD,IAAMA,QAAA,GAAW,SAAXA,SAAA,EAAiB;MAEtBZ,GAAA,CAAIS,UAAA,CAAWS,KAAA,CAAMC,OAAA,CAAQ;QAC5BC,GAAA,EAAK;QACLC,MAAA,EAAQ;QACRC,IAAA,EAAM;UACLC,KAAA,EAAOrB,IAAA,CAAKS;QACZ;QACDa,MAAA,EAAQ;UACPC,KAAA,EAAOtB,aAAA,CAAAI,KAAA,CAAImB,cAAA,CAAe,OAAO;QACjC;QACDC,OAAA,EAAS,SAATA,QAASC,GAAA,EAAO;UACfzB,aAAA,CAAAI,KAAA,CAAAC,KAAA,wCAAYoB,GAAA,EAAK,SAAS;UAC1BvB,IAAA,CAAKM,KAAA,GAAQiB,GAAA,CAAIN,IAAA;QACjB;QACDO,IAAA,EAAM,SAANA,KAAMD,GAAA,EAAO;UACZzB,aAAA,CAAAI,KAAA,CAAIuB,SAAA,CAAU;YACbC,KAAA,EAAOH,GAAA,CAAII,GAAA;YACXC,IAAA,EAAM;UACX,CAAK;QACD;MACJ,CAAG;IACD;IAED,IAAMC,OAAA,GAAU,SAAVA,QAAWpB,CAAA,EAAM;MACtBX,aAAA,CAAAI,KAAA,CAAI4B,UAAA,CAAW;QACdf,GAAA,EAAK,wBAAwBN,CAAA,CAAEE,aAAA,CAAcC,OAAA,CAAQmB;MACxD,CAAG;IACD;IAED,IAAMC,aAAA,GAAgB,SAAhBA,cAAA,EAAsB;MAC3BzB,QAAA,EAAU;IACV;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACxKF0B,EAAA,CAAGC,UAAA,CAAWC,SAAe","ignoreList":[]}